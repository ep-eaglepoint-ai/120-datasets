diff --git a/repository_before/deepClone.js b/repository_after/deepClone.js
index 74e1a73..41c60a5 100644
--- a/repository_before/deepClone.js
+++ b/repository_after/deepClone.js
@@ -1,19 +1,60 @@
-function deepClone(obj) {
+function deepClone(obj, visited = new WeakMap()) {
   // Handle primitives
   if (obj === null || typeof obj !== 'object') {
     return obj;
   }
 
+  // Check for circular references
+  if (visited.has(obj)) {
+    return visited.get(obj);
+  }
+
+  // Handle Date
+  if (obj instanceof Date) {
+    return new Date(obj.getTime());
+  }
+
+  // Handle RegExp
+  if (obj instanceof RegExp) {
+    return new RegExp(obj.source, obj.flags);
+  }
+
+  // Handle Map
+  if (obj instanceof Map) {
+    const clone = new Map();
+    visited.set(obj, clone);
+    for (const [key, value] of obj) {
+      clone.set(deepClone(key, visited), deepClone(value, visited));
+    }
+    return clone;
+  }
+
+  // Handle Set
+  if (obj instanceof Set) {
+    const clone = new Set();
+    visited.set(obj, clone);
+    for (const value of obj) {
+      clone.add(deepClone(value, visited));
+    }
+    return clone;
+  }
+
   // Handle arrays
   if (Array.isArray(obj)) {
-    return obj.map(item => deepClone(item));
+    const clone = [];
+    visited.set(obj, clone);
+    for (let i = 0; i < obj.length; i++) {
+      clone[i] = deepClone(obj[i], visited);
+    }
+    return clone;
   }
 
-  // Handle objects
+  // Handle plain objects
   const clone = {};
+  visited.set(obj, clone);
   for (const key in obj) {
     if (obj.hasOwnProperty(key)) {
-      clone[key] = deepClone(obj[key]);
+      clone[key] = deepClone(obj[key], visited);
     }
   }
 
@@ -21,4 +62,3 @@ function deepClone(obj) {
 }
 
 module.exports = { deepClone };
-
diff --git a/repository_before/index.js b/repository_after/index.js
index 906bbe5..0d1a204 100644
--- a/repository_before/index.js
+++ b/repository_after/index.js
@@ -1,2 +1 @@
 module.exports = require('./deepClone');
-
